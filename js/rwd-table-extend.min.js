/**
 * rwd-table-extend.js
 * A RWD-based html table extend tool which made by pure JavaScript and CSS
 * see: https://github.com/sean1093/html-rwd-table for details
 * @version: v1.0.4
 * @author: Sean Chou
 * @licensed: under MIT (https://github.com/sean1093/html-rwd-table/blob/master/LICENSE)
 */
!function(){"use strict";var a=function(a,b){return null!==a&&void 0!==a?a:b},b=function(a){this.divId=a,this.div=document.getElementById(a),this.table=null};b.TYPEDiv="div",b.TYPETable="table",b.REDCircle="red_circle",b.GREENCircle="green_circle",b.BORDERTop="border_top",b.BORDERBottom="border_bottom",b.BORDERLeft="border_left",b.BORDERRight="border_right",b.ALIGNLeft="left",b.ALIGNRight="right",b.ALIGNCenter="center",b.prototype.initTable=function(a,c){console.log("[rwd-table-extend] initTable"),(a=a||b.TYPETable)==b.TYPETable&&(this.table=document.createElement("table"),this.table.id="rwd-table_"+Date.now(),this.table.className="rwd-table",this.thead=document.createElement("thead"),this.tbody=document.createElement("tbody"),this.table.appendChild(this.thead),this.table.appendChild(this.tbody),this.div.appendChild(this.table),this.rows=null,this.rowCount=0,this.titleRowCount=0,this.columnCount=0,c&&this.setAutoView())},b.prototype.setSize=function(a,b){this.div.style.height=a,this.div.style.width=void 0!==b?b:"100%"},b.prototype.setAutoView=function(){var a=document.createElement("style");a.type="text/css",a.innerHTML="@media screen and (max-width: 451px) {.rwd-table tr {border: 1px solid #DDDDDD;}.rwd-table th {display: none;}.rwd-table td {display: block; border: none; text-indent: 10px;}.rwd-table td:before {content: attr(data-th) ''; float: left; font-weight: bold; color: #2196F3;}}",document.body.appendChild(a),console.log("[rwd-table-extend] setAutoView: true ")},b.prototype.addTableHead=function(a,b){var c=this.thead.insertRow(a),d=0;for(var e in b){var f=document.createElement("th");f.innerHTML=b[e],c.appendChild(f),d++}this.titleLength=d,console.log("[rwd-table-extend] addTableHead")},b.prototype.updateHead=function(a,b){if(void 0===this.thead||null===this.thead)console.error("[rwd-table-extend] Please add table header first!");else{this.thead.deleteRow(a);this.addTableHead(a,b)}},b.prototype.addDatas=function(c,d,e){for(var f=e||this.tbody.rows.length,g=Array.isArray(c)?c.length:1,h=0;h<g;h++){var i=this.tbody.insertRow(f),j=0,k=Array.isArray(c)?c[h]:c;for(var l in k){var m=i.insertCell(j),n=document.createElement("div");if(n.className+=" cell","object"==typeof k[l]){var o=document.createTextNode(k[l].value);if(n.style.color=a(k[l].foreColor,"black"),n.style.background=a(k[l].background,"white"),n.style.fontSize=a(k[l].fontSize,"none"),n.style.fontFamily=a(k[l].fontFamily,"none"),n.style.textAlign=a(k[l].textAlign,b.ALIGNLeft),k[l].hyperlink){var p=document.createElement("a");p.href=k[l].hyperlink,p.appendChild(o),n.appendChild(p)}else n.appendChild(o)}else if(k[l]==b.REDCircle)n.className+=" red-circle";else if(k[l]==b.GREENCircle)n.className+=" green-circle";else{var q=document.createTextNode(k[l]);n.appendChild(q)}m.appendChild(n),m.setAttribute("data-th",l),m.setAttribute("contenteditable",d||!1),j++}f++}},b.prototype.addRowDatas=function(b,c,d){for(var e=this.getColumnCount(),f=this.tbody.insertRow(b),g=0;g<e;g++){var h=f.insertCell(g),i=document.createElement("div"),j=document.createTextNode(a(c[g],""));i.appendChild(j),i.className+=" cell",h.appendChild(i),h.setAttribute("data-th",g),h.setAttribute("contenteditable",d||!1)}},b.prototype.deleteRow=function(a,b){for(b=b||1;b>0;)this.tbody.deleteRow(a),b--},b.prototype.insertRow=function(a,b,c){for(b=b||1;b>0;){for(var d=this.tbody.insertRow(a),e=0;e<this.titleLength;e++){d.insertCell(e).setAttribute("contenteditable",c||!1)}b--}},b.prototype.hideContent=function(a){var b=document.createElement("style");b.type="text/css",b.innerHTML="@media screen and (max-width:451px) { #"+this.table.id+" td[data-th='"+a+"'] { display: none; }}",document.body.appendChild(b)},b.prototype.fixHeader=function(){this.div.addEventListener("scroll",function(){var a="translate(0,"+this.scrollTop+"px)";this.querySelector("thead").style.transform=a}),this.div.style.overflow="auto",console.log("this.div.style.height: "+this.div.style.height),console.log("this.div.style.height.length: "+this.div.style.height.length),this.div.style.height=0!==this.div.style.height.length?this.div.style.height:"300px"},b.prototype.getColumnCount=function(){return this._updateColumnCount(),this.columnCount},b.prototype.getRowCount=function(){return this._updateRowCount(),this.rowCount},b.prototype._updateRowCount=function(){this.rows=this.tbody.rows,this.rowCount=this.rows.length},b.prototype._updateColumnCount=function(){this.titleRowCount=this.thead.rows.length;for(var a=0;a<this.titleRowCount;a++)this.columnCount=this.table.rows[a].cells.length>this.columnCount?this.table.rows[a].cells.length:this.columnCount},b.prototype.setHeaderBackColor=function(a,b){this.thead.rows[a].style.background=b},b.prototype.setRowBackColor=function(a,b){this.tbody.rows[a].style.background=b},b.prototype.setHeaderTextColor=function(a,b){this.thead.rows[a].style.color=b},b.prototype.setRowBorder=function(c,d,e){this.rows=this.tbody.rows,d==b.BORDERTop?this.rows[c].style.borderTop="1px solid "+a(e,"black"):d==b.BORDERBottom&&(this.rows[c].style.borderBottom="1px solid "+a(e,"black"))},b.prototype.setHeaderBorder=function(c,d,e){this.rows=this.thead.rows,d==b.BORDERTop?this.rows[c].style.borderTop="1px solid "+a(e,"black"):d==b.BORDERBottom&&(this.rows[c].style.borderBottom="1px solid "+a(e,"black"))},b.prototype.setColBorder=function(c,d,e,f){this.rows=this.table.rows;for(var g=0;g<this.rows.length;g++)if(f||0!==g){var h=this.rows[g].childNodes;d==b.BORDERLeft?h[c].style.borderLeft="1px solid "+a(e,"black"):d==b.BORDERRight&&(h[c].style.borderRight="1px solid "+a(e,"black"))}},b.prototype.tableConfig=function(b){if(console.warn("[rwd-table-extend] tableConfig() need to be the last function."),b.border)for(var c=this.table.rows,d=0;d<c.length;d++){c[d].style.borderTop="1px solid "+a(b.borderColor,"black"),d==c.length-1&&(c[d].style.borderBottom="1px solid "+a(b.borderColor,"black"));for(var e=c[d].cells,f=0;f<e.length;f++)e[f].style.borderLeft="1px solid "+a(b.borderColor,"black"),f==e.length-1&&(e[f].style.borderRight="1px solid "+a(b.borderColor,"black"))}},"undefined"!=typeof module&&void 0!==module.exports?module.exports=b:window.rwdTableExtend=b}();